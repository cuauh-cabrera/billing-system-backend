{"openapi":"3.0.1","info":{"title":"Billing System","description":"This is a REST API that performs transactions on accounts and bills and generates reports.","license":{"name":"Apache 2.0","url":"http://springdoc.org"},"version":"1.0.0"},"servers":[{"url":"https://cuauh-cabrera.github.io/billing-system-backend","description":"Generated server url"}],"paths":{"/api/v1/accounts/update/{accountId}":{"put":{"tags":["account-controller"],"summary":"Update the bill cycle for an account","operationId":"updateBillCycle","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBillCycleDTO"}}},"required":true},"responses":{"404":{"description":"Account not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UpdateBillCycleResponse"}}}},"500":{"description":"Bill cycle update failed","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UpdateBillCycleResponse"}}}},"200":{"description":"Account updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UpdateBillCycleResponse"}}}}}}},"/api/v1/accounts/transactions/{accountId}":{"put":{"tags":["account-controller"],"summary":"Perform a transaction on an account","operationId":"accountTransaction","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"operation","in":"query","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionAmountDTO"}}},"required":true},"responses":{"200":{"description":"Transaction performed successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"404":{"description":"Account not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"500":{"description":"Transaction failed","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}},"400":{"description":"Transaction not allowed","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TransactionResponse"}}}}}}},"/api/v1/accounts/inactivate/{accountId}":{"put":{"tags":["account-controller"],"summary":"Terminates the account with the given ID","operationId":"inactivateAccount","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAccountStatusDTO"}}},"required":true},"responses":{"404":{"description":"Account not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UpdateAccountStatusResponse"}}}},"200":{"description":"Account terminated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UpdateAccountStatusResponse"}}}},"400":{"description":"Account is already terminated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UpdateAccountStatusResponse"}}}},"500":{"description":"Error terminating account","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UpdateAccountStatusResponse"}}}}}}},"/api/v1/bills/create":{"post":{"tags":["bill-controller"],"operationId":"createBill","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBillDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CreateBillResponse"}}}}}}},"/api/v1/accounts/create":{"post":{"tags":["account-controller"],"summary":"Create a new billing account","operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAccountDTO"}}},"required":true},"responses":{"200":{"description":"Account created successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CreateAccountResponse"}}}},"500":{"description":"Account creation failed","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CreateAccountResponse"}}}}}}},"/api/v1/accounts/{accountId}":{"get":{"tags":["account-controller"],"summary":"Retrieves an account by ID","operationId":"findAccount","parameters":[{"name":"accountId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Error finding account","content":{"*/*":{"schema":{"$ref":"#/components/schemas/QueryAccountResponse"}}}},"404":{"description":"Account not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/QueryAccountResponse"}}}},"200":{"description":"Account found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/QueryAccountResponse"}}}}}}},"/api/v1/accounts/search":{"get":{"tags":["account-controller"],"summary":"Retrieves a list of accounts that match the given criteria","operationId":"searchAccount","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}},{"name":"sort","in":"query","required":false,"schema":{"type":"string"}},{"name":"bill_cicle","in":"query","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"last_bill","in":"query","required":false,"schema":{"type":"string","format":"date"}},{"name":"status","in":"query","required":false,"schema":{"type":"string","enum":["ACTIVE","TERMINATED"]}},{"name":"name","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Accounts found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SearchAccountResponse"}}}},"500":{"description":"Error searching accounts","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SearchAccountResponse"}}}}}}}},"components":{"schemas":{"UpdateBillCycleDTO":{"required":["billCycleDay"],"type":"object","properties":{"billCycleDay":{"type":"integer","format":"int32"}}},"UpdateBillCycleResponse":{"type":"object","properties":{"code":{"type":"integer","format":"int64"},"accountId":{"type":"integer","format":"int64"},"message":{"type":"string"}}},"TransactionAmountDTO":{"required":["amount"],"type":"object","properties":{"amount":{"minimum":0,"type":"number","format":"double"}}},"TransactionDetailsEvent":{"type":"object","properties":{"accountId":{"type":"integer","format":"int64"},"transactionType":{"type":"string","enum":["CHARGE","CREDIT"]},"previousBalance":{"type":"number","format":"double"},"transactionAmount":{"type":"number","format":"double"},"currentBalance":{"type":"number","format":"double"},"transactionDate":{"type":"string","format":"date"}}},"TransactionResponse":{"type":"object","properties":{"code":{"type":"integer","format":"int64"},"message":{"type":"string"},"details":{"$ref":"#/components/schemas/TransactionDetailsEvent"}}},"UpdateAccountStatusDTO":{"required":["status"],"type":"object","properties":{"status":{"type":"string","enum":["ACTIVE","TERMINATED"]}}},"UpdateAccountStatusEvent":{"type":"object","properties":{"accountId":{"type":"integer","format":"int64"},"updatedStatus":{"type":"string","enum":["ACTIVE","TERMINATED"]},"updatedAt":{"type":"string","format":"date"}}},"UpdateAccountStatusResponse":{"type":"object","properties":{"code":{"type":"integer","format":"int64"},"message":{"type":"string"},"details":{"$ref":"#/components/schemas/UpdateAccountStatusEvent"}}},"CreateBillDTO":{"required":["accountId","amount"],"type":"object","properties":{"accountId":{"type":"integer","format":"int64"},"amount":{"minimum":0,"type":"number","format":"double"}}},"CreateBillEvent":{"type":"object","properties":{"accountId":{"type":"integer","format":"int64"},"currentBalance":{"type":"number","format":"double"},"billAmount":{"type":"number","format":"double"},"newBalance":{"type":"number","format":"double"},"billGenerationDate":{"type":"string","format":"date"}}},"CreateBillResponse":{"type":"object","properties":{"code":{"type":"integer","format":"int64"},"message":{"type":"string"},"details":{"$ref":"#/components/schemas/CreateBillEvent"}}},"CreateAccountDTO":{"required":["billCycleDay","currentBalance","name","status"],"type":"object","properties":{"name":{"type":"string"},"currentBalance":{"type":"number","format":"double"},"billCycleDay":{"type":"integer","format":"int32"},"status":{"type":"string","enum":["ACTIVE","TERMINATED"]}}},"CreateAccountResponse":{"type":"object","properties":{"code":{"type":"integer","format":"int64"},"message":{"type":"string"}}},"Account":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"currentBalance":{"type":"number","format":"double"},"billCycleDay":{"type":"integer","format":"int32"},"lastBillDate":{"type":"string","format":"date"},"status":{"type":"string","enum":["ACTIVE","TERMINATED"]},"createdAt":{"type":"string","format":"date"},"updatedAt":{"type":"string","format":"date"}}},"QueryAccountResponse":{"type":"object","properties":{"code":{"type":"integer","format":"int64"},"message":{"type":"string"},"accounts":{"type":"array","items":{"$ref":"#/components/schemas/Account"}}}},"SearchAccountResponse":{"type":"object","properties":{"page":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"total":{"type":"integer","format":"int64"},"accounts":{"type":"array","items":{"$ref":"#/components/schemas/Account"}}}}}}}